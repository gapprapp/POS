<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="">
      <meta name="author" content="">

      <title>รายงานยอดขาย</title>

      <!-- Bootstrap Import -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">

      <!-- Super cool dialog-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

      <!-- Loading -->
      <link rel="stylesheet" href="css/easy-loading.css">
      <script src="js/easy-loading.js"></script>

      <!-- Date Picker -->
      <link href="css/datepicker.css" rel="stylesheet">
      <script src="js/datepicker.js"></script>
      <script src="js/datepicker.th-TH.js"></script>
      
      <!-- Sidbar -->
      <link href="css/simple-sidebar.css" rel="stylesheet">
      <!-- Font -->
      <link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
      <!-- Main -->
      <link href="css/untitled.css" rel="stylesheet">

    <style>
      .disabled{
        background-color: #444;
        color: white;
      }

      .nopd-5{
        padding-left: 5px;
        padding-right: 5px;
      }
      .nopd{
        padding-left: 0;
        padding-right: 0;
      }

      .inline{
          display: inline-block;
      }

      h2{
        width: 25%; border: solid 1px #666; border-radius: 3px; color: white; background-color: #666; padding-top: 9px; padding-bottom: 9px; letter-spacing: 1px;
      }
      h4{
        width: 20%; border: solid 1px #666; border-radius: 3px; color: white; background-color: #666; padding-top: 9px; padding-bottom: 9px; letter-spacing: 1px;
      }
      p{
        margin-bottom: 1px;
      }
    </style>

    <script>
      var year = (new Date().getFullYear()) + 543; var branch;
      var order_by = "sale_value", order_seq = "ASC";
      $(document).ready(function() {
        //$("#ctn-in-0").hide();
        url = new URL(window.location.href);
        m = url.searchParams.get("m");
        mth = url.searchParams.get("mth");
        d = url.searchParams.get("d");
        y = url.searchParams.get("y");
        if(m){
          setmonth(m);
          if(y){
            y = parseInt(y);
            y = y +543;
            setyear(y);
          }

          $("#opt-month").trigger("click");
        }else if(d){
          d = d.replace(/^0+/, '');
          mth = mth.replace(/^0+/, '');
          //alert("case d mth" + d + ' / ' + mth + ' / ' + year);
          fullmonth = checkmonth(mth);
          $("#date-full").text(d + " " + fullmonth + " ปี " + year);

          $("#opt-month").addClass('disabled');
          $("#select-year").prop('hidden', true);
          $("#select-month").prop('hidden', true);
        }else{
        // Date Now..
        date = (new Date().getDate());
        month = (new Date().getMonth()+1);
        //alert("case else "+date + ' / ' + month + ' / ' + year);
        fullmonth = checkmonth(month);
        $("#date-full").text(date + " " + fullmonth + " ปี " + year);
        $("#select-year").prop('hidden', true);
        $("#select-month").prop('hidden', true);
        }

        // datepicker
        $('[data-toggle="datepicker"]').datepicker({
            language: 'th-TH',
            format: 'yyyy-mm-dd',
            autoHide: true,
            endDate: '0d'
        }).change(function (event) {
            //alert(event.target.id);
            var date = $(this).val();
            var split = date.split("-");// yyyy[0] mm[1] dd[2] 
            var days = ['อา.', 'จ.', 'อ.', 'พ.', 'พฤ.', 'ศ.', 'ส.'];
            var month = [' ', 'ม.ค.', 'ก.พ.', 'มี.ค.', 'เม.ย.', 'พ.ค.', 'มิ.ย.', 'ก.ค.', 'ส.ค.', 'ก.ย.', 'ต.ค.', 'พ.ย.', 'ธ.ค.'];
            var d = new Date(split[0], split[1]-1, split[2]);
            var first = days[d.getDay()];
            month_index = split[1].replace(/^0+/, '');
            thai_year = (parseInt(split[0])+543)%2500;
            $(this).val((first + " " + split[2] + "/" + month[month_index] + "/" + thai_year));
            id = event.target.id.split('opt-');
            text = id[1]+"complete";
            $("#" + event.target.id).trigger(text);
        });
      });

      function checkmonth(arg){
        switch(arg) {
            case 1: case "1": return 'มกราคม';
            case 2: case "2": return 'กุมภาพันธ์';
            case 3: case "3": return 'มีนาคม';
            case 4: case "4": return 'เมษายน';
            case 5: case "5": return 'พฤษภาคม';
            case 6: case "6": return 'มิถุนายน';
            case 7: case "7": return 'กรกฎาคม';
            case 8: case "8": return 'สิงหาคม';
            case 9: case "9": return 'กันยายน';
            case 10: case "10": return 'ตุลาคม';
            case 11: case "11": return 'พฤศจิกายน';
            case 12: case "12": return 'ธันวาคม'; 
        }    
      }

      function checkfullmonth(arg){
        i = 0;
        var month = [' ', 'ม.ค.', 'ก.พ.', 'มี.ค.', 'เม.ย.', 'พ.ค.', 'มิ.ย.', 'ก.ค.', 'ส.ค.', 'ก.ย.', 'ต.ค.', 'พ.ย.', 'ธ.ค.'];
        for(i; i < month.length; i++){
          if(arg == month[i]){
            return i;
          }
        }
      }

      var index_m; var last_i_m = 0;
      function setmonth(arg){
        var text;
        switch(arg) {
            case 0:
            case "0":
              m = []; // moth that have data
              for(i = 1; i < data_month.length; i++){
                if(data_month[i] == 1){
                  m.push(i);
                }
              }
              // UI Append
              // Head
              $("#ctn-head").append('<div id="head" class="row" style="flex-wrap: nowrap;"> <div class="col-3 text-center nopd-5">บาร์โค๊ด</div> <div class="col-3 text-center nopd-5">ชื่อสินค้า</div> <div class="col-1 text-center nopd-5">ราคา</div> <div class="col-1 text-center nopd-5">หน่วย</div>');
              // Body(input)
              $("#ctn-show").append('<div id="show" class="row align-items-center" style="flex-wrap: nowrap;"> <div class="col-3 text-center input-group-prepend align-items-center" style="padding-right: 5px;"> <button class="btn btn-info btn-sm" style="margin-left: 5px; height: 100%;" onclick="$("#ctn-in-0").slideToggle(400);"> <i class="fas fa-sort-down"></i> </button> <span id="span-no" class="input-group-text" style="margin-left: 5px;">0</span> <input type="text" class="form-control text-center"> </div> <div class="col-3 nopd"> <input type="text" class="form-control text-center"> </div> <div class="col-1 nopd-5"> <input type="text" class="form-control text-center"> </div> <div class="col-1 nopd-5"> <input type="text" class="form-control text-center"> </div>');
              for(i = 0; i < m.length; i++){
                // console.log(m[i]); --> 3 4 5 6 7 8 9
                //Head
                $("#head").append('<div class="col-1 text-center nopd-5">จน. เดือน'+m[i]+'</div>');
                $("#head").append('<div class="col-1 text-center nopd-5">ยอด เดือน'+m[i]+'</div>');

                //Body(input)
                $("#show").append('<div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>');
                $("#show").append('<div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>');
              }
              $("#head").append('<div class="col-1 text-center nopd-5">จน. รวม '+year+'</div>');
              $("#head").append('<div class="col-1 text-center nopd-5">ยอดรวม '+year+'</div></div>');
              $("#show").append('<div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>');
              $("#show").append('<div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>');
              text = "ทุกเดือน"; break;
            case 1:
            case "1":
              text = "มกราคม"; break;
            case 2:
            case "2":
              text = "กุมภาพันธ์"; break;
            case 3:
            case "3":
              text = "มีนาคม"; break;
            case 4:
            case "4":
              text = "เมษายน"; break;
            case 5:
            case "5":
              text = "พฤษภาคม"; break;
            case 6:
            case "6":
              text = "มิถุนายน"; break;
            case 7:
            case "7":
              text = "กรกฎาคม"; break;
            case 8:
            case "8":
              text = "สิงหาคม"; break;
            case 9:
            case "9":
              index_m = 0;
              for(i = 0; i < prod_month.length; i++){
                bc = prod_month[i].barcode; pn = prod_month[i].prod_name; pp = prod_month[i].prod_price;
                un = prod_month[i].unit_name; amt = prod_month[i].amt9; sv = prod_month[i].sale_value9;

                if(amt != null && sv != null){
                  $("#ctn-show").append("<div class='row justify-content-center' style='margin-bottom: 5px;' > <div class='col-2 nopd-5'> <div class='input-group-prepend'> <span id='span-"+index_m+"' class='input-group-text'>"+(index_m+1)+"</span> <input readonly type='text' class='form-control text-center' value='"+bc+"'> </div> </div> <div class='col-3 nopd-5'> <input readonly type='text' class='form-control text-center' value='"+pn+"'> </div> <div class='col-1 nopd-5'> <input readonly type='text' class='form-control text-center' value='"+pp+"'> </div> <div class='col-1 nopd-5'> <input readonly type='text' class='form-control text-center' value='"+un+"'> </div> <div class='col-1 nopd-5'> <input readonly type='text' class='form-control text-center' value='"+amt+"'> </div> <div class='col-1 nopd-5'> <input readonly type='text' class='form-control text-center' value='"+sv+"'> </div> </div>");
                  index_m++;
                }if(index_m == 500){
                  last_i_m = i;
                  break;
                }
              }
              text = "กันยายน"; break;
            case 10:
            case "10":
              text = "ตุลาคม"; break;
            case 11:
            case "11":
              text = "พฤศจิกายน"; break;
            case 12:
            case "12":
              text = "ธันวาคม"; break;
            default:
              text = arg;
        }

        $("#select-month .btn").text(text);
        $("#title-1").text(text);
        $("#date-full").prop('hidden', true);
        $("#date-year").prop('hidden', false);
        $("#date-year").text("ปี " + year);
      }

      function setyear(arg){
        if($("#date-full").is(":visible")){
          $("#date-full").prop('hidden', true);
        }
        if(arg == "ทั้งหมด"){
          $("#select-year .btn").text(arg);
          $("#date-year").prop('hidden', false);
          $("#date-year").text(arg);
        }else{
          $("#select-year .btn").text("ปี "+arg);
          $("#date-year").prop('hidden', false);
          $("#date-year").text("ปี " + arg);
        }
      }

      function checkChange(arg){
        txt = $(arg).next().text();
        if(arg.checked == true){
          $('<div id="head-'+txt+'" class="col-1 text-center nopd"><span class="inline">สาขา</span> <span class="inline">'+txt+'</span></div>').insertBefore($('#head-spcf-total'));
          $('<div id="head-'+txt+'" class="col-1 nopd"><input type="text" class="form-control text-center"></div>').insertBefore($('#input-spcf-total'));
        }if(arg.checked == false){
          $("#head-"+txt).remove();
          $("#input-"+txt).remove();
        }
      }

      function setorderby(arg){
        order_by = arg;
        if(arg == 'amt'){
          $("#by-total").addClass('disabled');
          $("#by-amt").removeClass('disabled');
        }else{
          $("#by-amt").addClass('disabled');
          $("#by-total").removeClass('disabled');
        }
      }

      function setorderseq(arg){
        order_seq = arg;
        if(arg == 'ASC'){
          $("#by-desc").addClass('disabled');
          $("#by-asc").removeClass('disabled');
        }else{
          $("#by-asc").addClass('disabled');
          $("#by-desc").removeClass('disabled');
        }
      }
    </script>
</head>

<body style="overflow-x: auto;">
    <div id="wrapper">
      <!-- Sidebar -->
      <div id="sidebar-wrapper">
          <ul class="sidebar-nav" style="margin-top: 20px">
            <li class="sidebar-brand"><a id="sidebar-title" href="http://150.95.26.163:8080/gitmew/sale.html">PPS Auto Group</a></li>
              <li><a href="http://150.95.26.163:8080/gitmew/import.html">๐ สินค้าเข้า</a></li>
              <li><a id="mp" href="http://150.95.26.163:8080/gitmew/manage_prod.html">๐ จัดการสินค้า</a></li>
              <li><a href="http://150.95.26.163:8080/gitmew/manage_cus.html">๐ จัดการลูกค้า</a></li>
              <li><a href="http://150.95.26.163:8080/gitmew/sale.html">๐ ทำรายการขาย</a></li>  
              <li><a id="mb" href="http://150.95.26.163:8080/gitmew/manage_bill.html">๐ รายการขายย้อนหลัง</a></li> 
              <li><a href="http://150.95.26.163:8080/gitmew/cash_record.html">๐ ตัดกะ</a></li>   
              <li><a href="http://150.95.26.163:8080/gitmew/manage_shift.html">๐ รายการตัดกะย้อนหลัง</a></li> 
              <li><a href="http://150.95.26.163:8080/gitmew/transfer.html">๐ โอนสินค้า</a></li>
              <li><a href="http://150.95.26.163:8080/gitmew/multi_unit.html">๐ สินค้าหลายหน่วย</a></li>
              <li><a href="#" onclick="logout()">๐ ออกจากระบบ ๐</a></li>
          </ul>
      </div>

      <!-- Page Content -->
      <div id="page-content-wrapper">
          <div id="offline" class="alert alert-danger alert-dismissible" hidden>
            <button type="button" class="close" onclick="dismiss()">&times;</button>
            <strong>แจ้งเตือน!</strong> อินเทอเน็ตขาดการเชื่อมต่อ.
          </div>
          <div id="online" class="alert alert-success alert-dismissible" hidden>
            <button type="button" class="close" onclick="dismiss()">&times;</button>
            <strong>สำเร็จ!</strong> อินเทอเน็ตทำการเชื่อมต่อแล้ว.
          </div>
          <!-- Navbar -->
          <nav class="navbar navbar-expand-md navbar-dark mb-4 rounded" style="background: #860b0b;">
            <a href="#menu-toggle" class="navbar-brand " id="menu-toggle">รายการ</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-md-center" id="navbarCollapse">
              <h3 id="nav-title">รายงานยอดขาย</h3>
            </div>
          </nav>         

          <!-- Ctn-Options -->
          <br><div class="container-fullwidth">
            <div class="row justify-content-center">
              <div class="col-4 input-group" style="padding-left: 0;">
                  <input id="opt-from" data-toggle="datepicker" type="text" class="form-control text-center docs-date nopd" placeholder="เลือกวันที่" hidden readonly style="margin-right: 5px;">
                  <input id="opt-to" data-toggle="datepicker" type="text" class="form-control text-center docs-date nopd" placeholder="ถึงวันที่" hidden disabled>
              </div>
              <div class="col-3 input-group nopd">
                  <button id="opt-date" class="btn btn-secondary disabled" style="width: 75px; background-color: #666; margin-right: 5px;">รายวัน</button>
                  <button id="opt-month" class="btn btn-secondary disabled" style="background-color: #666; margin-right: 5px;">รายเดือน</button>
                  <button id="opt-year" class="btn btn-secondary disabled" style="width: 75px; background-color: #666;">รายปี</button>
              </div>
              <div class="col-3 input-group text-center">
                  <div id="select-month" class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: #666;  margin-right: 10px; width: 105px;">เดือน
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 0px !important; max-height: 150px !important; overflow-y: auto;">
                      <a class="dropdown-item text-center" onclick="setmonth(0);" href="#">ทุกเดือน</a>
                      <a class="dropdown-item text-center" onclick="setmonth(1);" href="#">มกราคม</a>
                      <a class="dropdown-item text-center" onclick="setmonth(2);" href="#">กุมภาพันธ์</a>
                      <a class="dropdown-item text-center" onclick="setmonth(3);" href="#">มีนาคม</a>
                       <a class="dropdown-item text-center" onclick="setmonth(4);" href="#">เมษายน</a>
                      <a class="dropdown-item text-center" onclick="setmonth(5);" href="#">พฤษภาคม</a>
                      <a class="dropdown-item text-center" onclick="setmonth(6);" href="#">มิถุนายน</a>
                       <a class="dropdown-item text-center" onclick="setmonth(7);" href="#">กรกฎาคม</a>
                      <a class="dropdown-item text-center" onclick="setmonth(8);" href="#">สิงหาคม</a>
                      <a class="dropdown-item text-center" onclick="setmonth(9);" href="#">กันยายน</a>
                       <a class="dropdown-item text-center" onclick="setmonth(10);" href="#">ตุลาคม</a>
                      <a class="dropdown-item text-center" onclick="setmonth(11);" href="#">พฤศจิกายน</a>
                      <a class="dropdown-item text-center" onclick="setmonth(12);" href="#">ธันวาคม</a>
                    </div>
                  </div>
                  <div id="select-year" class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: #666; width: 90px;">ปี 2561</button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 0px !important;">
                      <a class="dropdown-item" href="#" onclick="setyear('2561')">ปี 2561</a>
                      <a class="dropdown-item" href="#" onclick="setyear('2560')">ปี 2560</a>
                      <a class="dropdown-item" href="#" onclick="setyear('ทั้งหมด')">ทั้งหมด</a>
                    </div>
                  </div>
              </div>
            </div> 

          
          <div id="row-filter" class="row justify-content-center" style="margin-top: 20px;">
            <div class="col-6 nopd text-right">
              <div class="row justify-content-end" style="display: flex; align-items: center;">
                <div class="col-1"></div>
                <div class="col-3 text-center">จัดเรียงโดย : </div>
                <div class="col-6 input-group">
                  <button id="by-amt" class="btn btn-secondary disabled" style="background-color: #666; margin-right: 15px;" onclick="setorderby('amt')">จำนวน</button>
                  <button id="by-total" class="btn btn-secondary" style="background-color: #666;" onclick="setorderby('sale_value')">ราคารวม</button>
                </div>
              </div>
            </div>
            <div class="col-6 nopd text-left">
              <div class="row justify-content-start" style="display: flex; align-items: center;">
                <div class="col-1"></div>
                <div class="col-3 text-center">จัดเรียงจาก : </div>
                <div class="col-6 input-group">
                  <button id="by-desc" class="btn btn-secondary disabled" style="background-color: #666; margin-right: 15px;" onclick="setorderseq('DESC')">มาก > น้อย</button>
                  <button id="by-asc" class="btn btn-secondary" style="background-color: #666;" onclick="setorderseq('ASC')">น้อย > มาก</button>
                </div>
              </div>
            </div>
          </div>
          <!-- Checkbox Select Branch -->
          <div id="row-slct-branch" class="row justify-content-center" style="margin-top: 10px;" hidden>
            <div class="col-12 input-group text-center justify-content-center">
              <div class="col-1">สาขา : </div>
              <div class="col-2 nopd">
                <input type="checkbox" onchange="checkChange(this);">
                <label for="" style="margin-right: 5px;">สิงห์บุรี</label>
              </div>
              <div class="col-2 nopd">
                <input type="checkbox" onchange="checkChange(this);">
                <label for="" style="margin-right: 5px;">อ่างทอง</label>
              </div>
              <div class="col-2 nopd">
                <input type="checkbox" onchange="checkChange(this);">
                <label for="" style="margin-right: 5px;">คลังสินค้า</label>
              </div>
            </div>
          </div> <hr style="width: 90%;">

          <!-- Ctn-Date and Month -->
          <div class="container-fullwidth" style="margin-bottom: 20px;">
            <div id="row-title-1" class="row justify-content-center">
              <!-- วันนี้ // รายวัน // เดือนต่างๆ -->
              <h2 id="title-1" class="text-center">ยอดขาย</h2>
            </div>
            <div id="row-title-2" class="row justify-content-center" hidden>
              <!-- จาก ถึง -->
              <h4 id="h4-from" class="text-center"></h4>
              <h3 style="color: #666; padding-top: 5px; margin-left: 10px; margin-right: 10px;"> ถึง </h3>
              <h4 id="h4-to" class="text-center"></h4>
            </div>
            <div id="row-date" class="row justify-content-center">
              <p id="date-full" >22 มกราคม ปี 2561</p>
              <p id="date-year" hidden>ปี 2561</p>
            </div>
          </div>
          
          <!-- Ctn-Header -->
          <div id="ctn-head" class="container-fullwidth">
            <!--<div class="row head-wth-branch justify-content-center" hidden>
              <div class="col-2 text-center nopd-5">บาร์โค๊ด</div>
              <div class="col-3 text-center nopd-5">ชื่อสินค้า</div>
              <div class="col-1 text-center nopd-5">ราคา</div>
              <div class="col-1 text-center nopd-5">หน่วย</div>
              <div class="col-1 text-center nopd-5">จำนวน</div>
              <div class="col-1 text-center nopd"><span class="inline">ยอดขาย</span> <span class="inline">สาขา 1</span></div>
              <div class="col-1 text-center nopd"><span class="inline">ยอดขาย</span> <span class="inline">สาขา 2</span></div>
              <div class="col-1 text-center nopd"><span class="inline">ยอดขาย</span> <span class="inline">สาขา 3</span></div>
              <div class="col-1 text-center nopd">ยอดขายรวม</div>
            </div>
            <div class="row head-spcf-branch justify-content-center" hidden>
              <div class="col-2 text-center nopd-5">บาร์โค๊ด</div>
              <div class="col-3 text-center nopd-5">ชื่อสินค้า</div>
              <div class="col-1 text-center nopd-5">ราคา</div>
              <div class="col-1 text-center nopd-5">หน่วย</div>
              <div class="col-1 text-center nopd-5">จำนวน</div>
              <div id="head-spcf-total"  class="col-1 text-center nopd">ยอดขายรวม</div>
            </div>
            <div id="head" class="row" style="flex-wrap: nowrap;" hidden>
              <div class="col-3 text-center nopd-5">บาร์โค๊ด</div>
              <div class="col-3 text-center nopd-5">ชื่อสินค้า</div>
              <div class="col-1 text-center nopd-5">ราคา</div>
              <div class="col-1 text-center nopd-5">หน่วย</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 1</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 1</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 2</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 2</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 3</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 3</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 4</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 4</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 5</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 5</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-1 text-center nopd-5">จำนวนเดือน 1</div>
              <div class="col-1 text-center nopd-5">ยอดเดือน1</div>
              <div class="col-2 text-center nopd" style="padding-right: 3%;">ยอดขายรวม</div>
            </div>-->
          </div>

          <!-- Ctn-Show -->
          <div id="ctn-show" class="container-fullwidth" style="margin-top: 5px;">
            <!--<div class="row input-wth-branch justify-content-center" style="flex-wrap: nowrap;" hidden>
              <div class="col-2 nopd-5">
                <div class='input-group-prepend'>
                  <span id="span-no" class='input-group-text'>#</span>
                  <input id='barcode' type='text' class='form-control text-center'>
                </div>
              </div>
              <div class="col-3 nopd-5">
                <input id='name' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='price' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='unit' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='branch-1' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='branch-2' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='branch-3' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='total' type='text' class='form-control text-center'>
              </div>
            </div>
            <div class="row input-spcf-branch justify-content-center" style="flex-wrap: nowrap;" hidden>
              <div class="col-2 nopd-5">
                <div class='input-group-prepend'>
                  <span id="span-no" class='input-group-text'>#</span>
                  <input id='barcode' type='text' class='form-control text-center'>
                </div>
              </div>
              <div class="col-3 nopd-5">
                <input id='name' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='price' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='unit' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div id="input-spcf-total" class="col-1 nopd-5">
                <input id='total' type='text' class='form-control text-center'>
              </div>
            </div>-->
            <div class="row align-items-center" style="flex-wrap: nowrap;" hidden>
              <div class="col-3 text-center input-group-prepend align-items-center" style="padding-right: 5px;">
                <button class="btn btn-info btn-sm" style="margin-left: 5px; height: 100%;" onclick="$('#ctn-in-0').slideToggle(400);">
                  <i class="fas fa-sort-down"></i>
                </button>
                <span id="span-no" class='input-group-text' style="margin-left: 5px;">0</span>
                <input id='barcode' type='text' class='form-control text-center'>
              </div>
              <div class="col-3 nopd">
                <input id='name' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='price' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='unit' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5">
                <input id='amount' type='text' class='form-control text-center'>
              </div>
              <div class="col-1 nopd-5" style="padding-left: 5px;">
                <input id='total' type='text' class='form-control text-center'>
              </div>
            </div>
            <!--<div id="ctn-in-0" class="container-fullwidth" style="padding-bottom: 10px; background-color: white; border-radius: 5px;margin: 10px auto;">
              <div class="col-3">สาขา 1 : </div>
              <div class="row justify-content-start" style="padding-top: 10px; padding-left: 4%; width: 98%;">
                <div class="col-12">
                  <div class="row align-items-center justify-content-center">
                    <div class="col-1 nopd-5 text-center">จน. เดือน1</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน2</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน3</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน4</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน5</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน6</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน7</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน8</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน9</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน10</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน11</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน12</div>
                  </div>
                  <div class="row align-items-center justify-content-center" style="margin-top: 3px; margin-bottom: 8px;">
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                  </div>
                  <div class="row align-items-center justify-content-center">
                    <div class="col-1 nopd-5 text-center">ยอด เดือน1</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน2</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน3</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน4</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน5</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน6</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน7</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน8</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน9</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน10</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน11</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน12</div>
                  </div>
                  <div class="row align-items-center justify-content-center" style="margin-top: 3px; margin-bottom: 20px;">
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                  </div>
                </div>
              </div>


              <div class="col-3">สาขา 2 : </div>
              <div class="row justify-content-start" style="padding-top: 10px; padding-left: 4%; width: 98%;">
                <div class="col-12">
                  <div class="row align-items-center justify-content-center">
                    <div class="col-1 nopd-5 text-center">จน. เดือน1</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน2</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน3</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน4</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน5</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน6</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน7</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน8</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน9</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน10</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน11</div>
                    <div class="col-1 nopd-5 text-center">จน. เดือน12</div>
                  </div>
                  <div class="row align-items-center justify-content-center" style="margin-top: 3px; margin-bottom: 8px;">
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                  </div>
                  <div class="row align-items-center justify-content-center">
                    <div class="col-1 nopd-5 text-center">ยอด เดือน1</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน2</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน3</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน4</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน5</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน6</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน7</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน8</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน9</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน10</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน11</div>
                    <div class="col-1 nopd-5 text-center">ยอด เดือน12</div>
                  </div>
                  <div class="row align-items-center justify-content-center" style="margin-top: 3px;">
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                    <div class="col-1 nopd-5"><input type="text" class="form-control text-center"></div>
                  </div>
                </div>
              </div>
            </div>-->
          </div>
        </div>
      </div><!-- End page content wrapper -->
    </div> <!-- End Wrapper -->
    <script>
      var prod_month = [];
      $("#opt-date").click(function(event) {
          if($(this).hasClass('disabled')) $(this).removeClass('disabled');
          if(!$("#opt-from").is(":visible")){$("#opt-from").prop('hidden', false); $("#btn-from").prop('hidden', false); $("#btn-to").prop('hidden', false); $("#opt-to").prop('hidden', false);} 
          $("#opt-month").addClass('disabled');
          $("#opt-year").addClass('disabled');
          $("#select-year").prop('hidden', true);
          $("#select-month").prop('hidden', true);
      });
      var data_month = [-1,0,0,0,0,0,0,0,0,0,0,0,0,0];
      $("#opt-month").click(function(event) {
          if($(this).hasClass('disabled')) $(this).removeClass('disabled');
          if(!$("#select-month").is(":visible")){
            $("#select-year").prop('hidden', false);
            $("#select-month").prop('hidden', false);
          } 
          $("#opt-from").prop("hidden", true);
          $("#opt-to").prop("hidden", true);
          $("#opt-date").addClass('disabled');
          $("#opt-year").addClass('disabled');

          var year = $("#select-year .btn").text().split(" ")[1]-543;
          if(prod_month.length == 0){
            $.ajax({
            url: 'http://150.95.26.163:8080/gitmew/php/report_sale.php',
            type: 'POST',
            data: {
              year_list: 'view_by_month', 
              year: year,
              order_by: order_by,
              order_seq: order_seq
            },
            beforeSend: function(){
              EasyLoading.show({                           
                text: "กำลังโหลด"                            
              });
            }
          })
          .done(function(data) {
            EasyLoading.hide();
            //console.log(data);
            var obj = jQuery.parseJSON(data);
            $.each(obj, function(i, field){ 
              prod_month.push({
                barcode: field.barcode,
                prod_name: field.prod_name,
                prod_price: field.prod_price,
                unit_name: field.unit_name,
                amt: field.amt,
                sale_value: field.sale_value,
              });
              i = prod_month.length-1;
              /*console.log("bc "+field.barcode);console.log("na "+field.prod_name);console.log("pp "+field.prod_price);console.log("un "+field.unit_name);console.log("a "+field.amt); console.log("sv "+field.sale_value);*/
              if(field.amt1){if(data_month[1] == 0) data_month[1] = 1; Object.assign(prod_month[i], {amt1: field.amt1, sale_value1: field.sale_value1});}
              if(field.amt2){if(data_month[2] == 0) data_month[2] = 1; Object.assign(prod_month[i], {amt2: field.amt2, sale_value2: field.sale_value2});}
              if(field.amt3){if(data_month[3] == 0) data_month[3] = 1; Object.assign(prod_month[i], {amt3: field.amt3, sale_value3: field.sale_value3});}
              if(field.amt4){if(data_month[4] == 0) data_month[4] = 1; Object.assign(prod_month[i], {amt4: field.amt4, sale_value4: field.sale_value4});}
              if(field.amt5){if(data_month[5] == 0) data_month[5] = 1; Object.assign(prod_month[i], {amt5: field.amt5, sale_value5: field.sale_value5});}
              if(field.amt6){if(data_month[6] == 0) data_month[6] = 1; Object.assign(prod_month[i], {amt6: field.amt6, sale_value6: field.sale_value6});}
              if(field.amt7){if(data_month[7] == 0) data_month[7] = 1; Object.assign(prod_month[i], {amt7: field.amt7, sale_value7: field.sale_value7});}
              if(field.amt8){if(data_month[8] == 0) data_month[8] = 1; Object.assign(prod_month[i], {amt8: field.amt8, sale_value8: field.sale_value8});}
              if(field.amt9){if(data_month[9] == 0) data_month[9] = 1; Object.assign(prod_month[i], {amt9: field.amt9, sale_value9: field.sale_value9});}
              if(field.amt10){if(data_month[10] == 0) data_month[10] = 1; Object.assign(prod_month[i], {amt10: field.amt10, sale_value10: field.sale_value10});}
              if(field.amt11){if(data_month[11] == 0) data_month[11] = 1; Object.assign(prod_month[i], {amt11: field.amt11, sale_value11: field.sale_value11});}
              if(field.amt12){if(data_month[12] == 0) data_month[12] = 1; Object.assign(prod_month[i], {amt12: field.amt12, sale_value12: field.sale_value12});}
            });
            setmonth(0); // all month
          })
          .fail(function() {
            console.log("error");
          })
          .always(function() {
            console.log("complete");
          });
          }
      });

      $("#opt-year").click(function(event) {
        if($(this).hasClass('disabled')) $(this).removeClass('disabled');
        if($("#select-month").is(":visible")){
          $("#select-month").prop('hidden', true);
        }else{
          $("#select-year").prop('hidden', false);
        }
        $("#opt-from").prop("hidden", true);
        $("#opt-to").prop("hidden", true);
        $("#opt-date").addClass('disabled');
        $("#opt-month").addClass('disabled');
      });

      $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");

        if($("#menu-toggle").text() == "รายการ"){
          $("#menu-toggle").text("กลับ");
        }else if($("#menu-toggle").text() == "กลับ"){
          $("#menu-toggle").text("รายการ");
        }
      });

      $("#opt-from").on('fromcomplete',function() {
        $("#opt-to").prop('disabled', false);
        $("#opt-to").prop('readonly', true);
        $("#date-full").prop('hidden', true);
        $("#date-year").prop('hidden', true);

        // change date on title-1
        $("#title-1").text($("#opt-from").val());

        // get and show data from db
      });

      $("#opt-to").on('tocomplete',function() {
        // change date on title-2
        temp = $(this).val().split(' ');
        temp = temp[1].split('/');
        temp_date = parseInt(temp[0]);
        temp_month = checkfullmonth(temp[1]);

        temp_from = $("#opt-from").val().split(' ');
        temp_from = temp_from[1].split('/');
        temp_from_date = parseInt(temp_from[0]); // opt-from date //
        temp_from_month = checkfullmonth(temp_from[1]); // opt-from month //
        //alert(temp_date + " " + temp_from_date);

        if(temp_date < temp_from_date || temp_month < temp_from_month){
          $(this).val("");
          alert("กรุณาเลือกวันที่ถัดออกไป");
        }else{
          // วันที่ถูกต้อง
          $("#title-1").text('');
          $("#row-title-1").prop('hidden', true);
          $("#row-title-2").prop('hidden', false);
          $("#h4-from").text($("#opt-from").val());
          $("#h4-to").text($("#opt-to").val());
        }
      });
    </script>
</body>
</html>